<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Wallet - Portefeuille Crypto</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body {
    margin:0; padding:0;
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg,#1877f2,#6ea0f8);
    display:flex; justify-content:center; align-items:center; min-height:100vh;
}
.container {
    background:white; width:90%; max-width:420px; padding:30px 25px;
    border-radius:20px; box-shadow:0 10px 25px rgba(24,119,242,.4);
    text-align:center;
}
h2 { color:#1877f2; margin-bottom:15px; font-weight:700; }
.userName { margin-bottom:20px; font-size:18px; font-weight:600; color:#333; }
.balance {
    text-align:left; background:#f0f2f5; padding:15px; border-radius:12px; margin-bottom:20px;
    font-size:16px;
}
.balance p { margin:8px 0; }
button {
    margin-top:10px; width:100%; padding:12px 0; font-size:16px;
    border:none; border-radius:12px; cursor:pointer;
    background:#1877f2; color:white; font-weight:600;
    transition:background 0.3s ease, transform 0.15s ease;
}
button:hover { background:#145dbf; transform:scale(1.05); }
</style>
</head>
<body>

<div class="container">
    <h2>Portefeuille Crypto</h2>
    <div class="userName" id="userName">Utilisateur: Demo</div>

    <div class="balance" id="balanceDiv">
        <p><strong>BTC :</strong> <span id="btc">1</span></p>
        <p><strong>ETH :</strong> <span id="eth">0</span></p>
        <p><strong>USDT :</strong> <span id="usdt">0</span></p>
    </div>

    <button id="depositBtn">Déposer</button>
    <button id="withdrawBtn">Retirer</button>
    <button id="transferBtn">Transférer</button>
</div>

<script>
const API_KEY = "2e61ecef60d96cf142cca90f417dde1913d72b4ab8ed5ab9d9798152768d3026";
const BASE_URL = "https://faucetpay.io/api/v1/";

async function getBalance() {
    try {
        const form = new FormData();
        form.append("api_key", API_KEY);

        const res = await fetch("https://faucetpay.io/api/v1/balance", {
            method: "POST",
            body: form
        });

        const data = await res.json();
        if(data.status === "success") {
            document.getElementById("btc").innerText = parseFloat(data.balance.BTC).toFixed(4);
            document.getElementById("eth").innerText = parseFloat(data.balance.ETH).toFixed(4);
            document.getElementById("usdt").innerText = parseFloat(data.balance.USDT).toFixed(2);
        } else {
            alert("Erreur: " + data.message);
        }
    } catch(err) {
        console.error(err);
        alert("Erreur lors du chargement du solde");
    }
}

async function deposit() {
    const coin = prompt("Entrer la crypto (BTC, ETH, USDT):");
    const amount = prompt("Montant à déposer:");
    if(!coin || !amount) return;
    try {
        const res = await fetch(`${BASE_URL}deposit?api_key=${API_KEY}&coin=${coin}&amount=${amount}`);
        const data = await res.json();
        alert(data.status + ": " + data.message);
        getBalance();
    } catch(err) { console.error(err); }
}

async function withdraw() {
    const coin = prompt("Entrer la crypto (BTC, ETH, USDT):");
    const amount = prompt("Montant à retirer:");
    const address = prompt("Adresse de retrait:");
    if(!coin || !amount || !address) return;
    try {
        const res = await fetch(`${BASE_URL}withdraw?api_key=${API_KEY}&coin=${coin}&amount=${amount}&address=${address}`);
        const data = await res.json();
        alert(data.status + ": " + data.message);
        getBalance();
    } catch(err) { console.error(err); }
}

async function transfer() {
    const coin = prompt("Entrer la crypto (BTC, ETH, USDT):");
    const amount = prompt("Montant à transférer:");
    const user = prompt("Utilisateur FaucetPay cible:");
    if(!coin || !amount || !user) return;
    try {
        const res = await fetch(`${BASE_URL}transfer?api_key=${API_KEY}&coin=${coin}&amount=${amount}&username=${user}`);
        const data = await res.json();
        alert(data.status + ": " + data.message);
        getBalance();
    } catch(err) { console.error(err); }
}

// Évènements boutons
document.getElementById("depositBtn").addEventListener("click", deposit);
document.getElementById("withdrawBtn").addEventListener("click", withdraw);
document.getElementById("transferBtn").addEventListener("click", transfer);

getBalance();
</script>

</body>
</html>
